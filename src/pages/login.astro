---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Login to Dhaka Health Club">
  <div class="min-h-[80vh] flex items-center justify-center">
    <div class="card w-full max-w-md p-8">
      <h2 class="text-3xl font-bold text-center mb-6 text-primary">Welcome Back!</h2>
      <form id="login-form">
        <div class="mb-4">
          <label for="email" class="block mb-2 text-text-secondary">Email</label>
          <input type="email" id="email" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary" />
        </div>
        <div class="mb-6">
          <label for="password" class="block mb-2 text-text-secondary">Password</label>
          <input type="password" id="password" class="w-full px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary" />
        </div>
        <button type="submit" class="btn btn-primary w-full">Login</button>
      </form>
      <p class="text-center mt-6 text-text-secondary">
        Don't have an account? <a href="/register" class="text-primary hover:underline">Register</a>
      </p>
    </div>
  </div>
</Layout>

<script>
  import { logIn } from "../firebase/auth";

  const form = document.getElementById("login-form");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = form.email.value;
    const password = form.password.value;

    try {
      await logIn(email, password);
      window.location.href = "/dashboard";
    } catch (error) {
      alert(error.message);
    }
  });
</script>
