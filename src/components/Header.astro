<header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-slate-200">
  <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
    <a href="/" class="text-2xl font-bold bg-gradient-to-r from-green-600 to-green-500 bg-clip-text text-transparent hover:from-green-700 hover:to-green-600 transition-all">
      Dhaka Health Club
    </a>
    <div class="hidden md:flex space-x-8 items-center" id="desktop-nav">
      <!-- Navigation links will be dynamically injected here -->
    </div>
    <div class="md:hidden">
      <!-- Mobile Menu Button -->
      <button id="mobile-menu-button" class="text-slate-700 focus:outline-none p-2 hover:bg-slate-100 rounded-lg transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </div>
  </nav>
  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 bg-white border-t border-slate-100">
    <!-- Mobile navigation links will be dynamically injected here -->
  </div>
</header>

<script>
  import { logOut, onAuthStateChangedListener } from "../firebase/auth";

  const desktopNav = document.getElementById("desktop-nav");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileMenuButton = document.getElementById("mobile-menu-button");

  const loggedOutLinks = `
    <a href="/" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Home</a>
    <a href="/gallery" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Gallery</a>
    <a href="/login" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Login</a>
    <a href="/register" class=\"btn btn-primary\">Register</a>
  `;

  const loggedInLinks = `
    <a href="/" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Home</a>
    <a href="/gallery" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Gallery</a>
    <a href="/dashboard" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Dashboard</a>
    <a href="/tasks" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">My Tasks</a>
    <a href="/profile" class=\"text-slate-700 hover:text-green-600 transition-colors font-medium\">Profile</a>
    <button id="logout-button" class=\"btn btn-secondary\">Logout</button>
  `;

  const mobileLoggedOutLinks = `
    <a href="/" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Home</a>
    <a href="/gallery" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Gallery</a>
    <a href="/login" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Login</a>
    <a href="/register" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Register</a>
  `;

  const mobileLoggedInLinks = `
    <a href="/" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Home</a>
    <a href="/gallery" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Gallery</a>
    <a href="/dashboard" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Dashboard</a>
    <a href="/tasks" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">My Tasks</a>
    <a href="/profile" class=\"block py-3 text-slate-700 hover:text-green-600 hover:bg-slate-50 px-4 rounded-lg transition-colors font-medium\">Profile</a>
    <button id="mobile-logout-button" class=\"btn btn-secondary w-full mt-2\">Logout</button>
  `;

  onAuthStateChangedListener((user) => {
    if (user) {
      if(desktopNav) desktopNav.innerHTML = loggedInLinks;
      if(mobileMenu) mobileMenu.innerHTML = mobileLoggedInLinks;

      const logoutButton = document.getElementById("logout-button");
      if (logoutButton) {
        logoutButton.addEventListener("click", async () => {
          await logOut();
          window.location.href = "/login";
        });
      }

      const mobileLogoutButton = document.getElementById("mobile-logout-button");
      if (mobileLogoutButton) {
        mobileLogoutButton.addEventListener("click", async () => {
          await logOut();
          window.location.href = "/login";
        });
      }
    } else {
      if(desktopNav) desktopNav.innerHTML = loggedOutLinks;
      if(mobileMenu) mobileMenu.innerHTML = mobileLoggedOutLinks;
    }
  });

  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });
  }
</script>
